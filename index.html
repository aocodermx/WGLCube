<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Test control usage</title>
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>
    <script src="js/three.min.js"></script>
    <script>
      var N = 1;
      var I = -1;
      var cubeSize = 3;
      var layers = new Array();
      var scene  = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
      camera.position.set(15,15,15);
      camera.rotation.z += 10;
      camera.lookAt(scene.position);

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      renderer.setClearColor(0xCCCCCC, 1);
      document.body.appendChild( renderer.domElement );



      var gridXY = new THREE.GridHelper(100, 1);
      gridXY.position.set( 100,100,0 );
      gridXY.rotation.x = Math.PI/2;
      gridXY.setColors( new THREE.Color(0x000066), new THREE.Color(0x000066) );
      scene.add(gridXY);



      createCube(scene);
      render();

      function createCube(scene){
        var geometry = new THREE.BoxGeometry( 0.99, 0.99, 0.99 );
        var material = new THREE.MeshFaceMaterial( [
          new THREE.MeshBasicMaterial({color:0xFF0000}), // Left   -> Red
          new THREE.MeshBasicMaterial({color:0xFF6600}), // Right  -> Orange
          new THREE.MeshBasicMaterial({color:0x00FF00}), // Top    -> Green
          new THREE.MeshBasicMaterial({color:0x0000FF}), // Bottom -> Blue
          new THREE.MeshBasicMaterial({color:0xFFFFFF}), // Front  -> White
          new THREE.MeshBasicMaterial({color:0xFFFF00})  // Back   -> Yellow
          ] );

        var planeGeometry = new THREE.PlaneBufferGeometry(3, 3);
        var planeMaterial = new THREE.MeshNormalMaterial();

        for(var z=0; z<cubeSize; z++){
          layers[z] = new THREE.Mesh(planeGeometry, planeMaterial);
          layers[z].position.x += 1.5;
          layers[z].position.y += 1.5;
          layers[z].position.z += z * 1 + 0.5;
          for(var x=0; x<cubeSize; x++){
            for(var y=0; y<cubeSize; y++){
              var piece = new THREE.Mesh(geometry, material);
              piece.position.x = x - 1;
              piece.position.y = y - 1;
              //piece.position.z = z * 1.02;
              layers[z].add(piece);
            }
          }
          scene.add(layers[z]);
        }
      }

      function U(direction){
        for (var i = 0; i < 9; i++) {
          layers[0].rotation.z += deg2rad(10*direction);
        }
      }

      function M(direction){
        for (var i = 0; i < 9; i++) {
          layers[1].rotation.z += deg2rad(10*direction);
        }
      }

      function D(direction){
        for (var i = 0; i < 9; i++) {
          layers[2].rotation.z += deg2rad(1*direction);
        }
      }

      function render() {
        requestAnimationFrame( render );
        renderer.render( scene, camera );
      }

      function deg2rad(degrees){
        return degrees*(Math.PI/180);
      }
    </script>
  </body>
</html>
