var WGLCube=function(e){return e.Core=function(e){function a(e){if(d=e,u.size=d.getAttribute("data-size"),"undefined"==typeof u.size)return console.log("data-size parameter needed in order to render cube."),0;u.STEP_TIME*=u.size;var a=d.getAttribute("data-show");null!==a&&(h=a.split(","));var t=document.createElement("div");t.className="preview",t.innerHTML="<div class='square s1'></div><div class='square s2'></div><div class='square s3'></div><div class='square s4'></div>";var s=document.createElement("div");s.className="cube",d.appendChild(t),d.appendChild(s)}function t(){v=d.getElementsByClassName("cube")[0],C=new THREE.Scene,g=window.WebGLRenderingContext?new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}):new THREE.CanvasRenderer,B=new THREE.PerspectiveCamera(45,v.offsetWidth/v.offsetHeight,.1,1e3),L=new THREE.OrbitControls(B,g.domElement),L.enablePan=!1,g.setClearColor(14211288,1),g.setSize(v.offsetWidth,v.offsetHeight),v.appendChild(g.domElement),s(),v.addEventListener("resize",c),B.position.addScalar(1.4*u.size),l(g,B,L)}function s(){for(var e=0,a=E.length;e<a;e++)C.remove(E[e]);E=[];for(var t=new THREE.BoxGeometry(.98,.98,.98),s=new THREE.MeshFaceMaterial([new THREE.MeshBasicMaterial({color:16737792}),new THREE.MeshBasicMaterial({color:16711680}),new THREE.MeshBasicMaterial({color:65280}),new THREE.MeshBasicMaterial({color:255}),new THREE.MeshBasicMaterial({color:16777215}),new THREE.MeshBasicMaterial({color:16776960})]),i=new THREE.MeshFaceMaterial([new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676})]),n=Math.abs(-u.size/2+.5),r=-u.size/2+.5;r<u.size/2;r++)for(var o=-u.size/2+.5;o<u.size/2;o++)for(var l=-u.size/2+.5;l<u.size/2;l++){var c=null;Math.abs(o)!==n&&Math.abs(l)!==n&&Math.abs(r)!==n||(c=0!==h.length&&h.indexOf(E.length.toString())<0?new THREE.Mesh(t,i):new THREE.Mesh(t,s),c.position.set(o,l,r),E.push(c),C.add(c))}}function i(e,a,t){var s=t-u.size/2+.5-1;C.add(e);for(var i=0,n=E.length;i<n;i++)E[i].getWorldPosition()[a]===s&&THREE.SceneUtils.attach(E[i],C,e)}function n(e,a,t){for(var s=t-u.size/2+.5-1,i=0,n=E.length;i<n;i++)E[i].getWorldPosition()[a]===s&&THREE.SceneUtils.detach(E[i],e,C);C.remove(e)}function r(){if(TWEEN.update(),T){switch(f=new THREE.Object3D,i(f,m,p),M=new TWEEN.Tween(f.rotation),m){case"x":M.to({x:b},u.STEP_TIME*R);break;case"y":M.to({y:b},u.STEP_TIME*R);break;case"z":M.to({z:b},u.STEP_TIME*R)}M.onStop(function(){f.updateMatrixWorld(),n(f,m,p),H=!1,s(C)}),M.onComplete(function(){f.updateMatrixWorld(),n(f,m,p),H=!1,z()}),T=!1,H=!0,M.start()}}function o(e,a,t){switch(f=new THREE.Object3D,i(f,e,a),e){case"x":f.rotation.x+=t;break;case"y":f.rotation.y+=t;break;case"z":f.rotation.z+=t}f.updateMatrixWorld(),n(f,e,a)}function l(e,a,t){w=requestAnimationFrame(function(){l(e,a,t)}),e.render(C,a),r(),t.update()}function c(){var e=u.CubeContainer.offsetWidth,a=u.CubeContainer.offsetHeight;g.setSize(e,a),B.aspect=e/a,B.updateProjectionMatrix()}var u=this;u.size=null,u.STEP_TIME=200;var d=null,E=[],h=[],f=null,v=null,M=null,w=null,T=!1,m=null,p=null,b=null,R=null,H=null,z=null,C=null,g=null,B=null,L=null;this.to_interactive_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-show"),e.classList.add("util-hide");var a=d.getElementsByClassName("cube")[0];a.classList.remove("util-hide"),a.classList.add("util-show"),t()},this.to_preview_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-hide"),e.classList.add("util-show");var a=d.getElementsByClassName("cube")[0];if(a.classList.remove("util-show"),a.classList.add("util-hide"),cancelAnimationFrame(w),null!==g)for(g.forceContextLoss(),g=null,B=null,L=null;v.lastChild;)v.removeChild(v.lastChild)},this.Reset=function(){null!==M&&H?M.stop():s(C)},this.Move=function(e,a,t,s){if(H)return void console.log("Animation not finished, try again later.");a&&t(),e+=" ";for(var i=0,n="",r="",l=0,c=1,d=2,E=3,h=4,f=5;"undefined"!=typeof n;)for(var v="",M=1,w=1,C=1,g=l;g!==f;){switch(n=e[i],g){case l:/\s/g.test(n)||(g=c,i--),"undefined"==typeof n&&(g=f);break;case c:var B=parseInt(n);isNaN(B)?(g=d,i--,""!==r&&(M=parseInt(r),r="")):r+=n;break;case d:switch(n){case"R":M=u.size-M+1,w*=-1;case"L":v="x";break;case"U":M=u.size-M+1,w*=-1;case"D":v="y";break;case"F":M=u.size-M+1,w*=-1;case"B":v="z";break;default:return console.log("FACE to move is incorrect"),-1}g=E;break;case E:var L=parseInt(n);isNaN(L)?(g=h,i--,""!==r&&(C=parseInt(r),r="")):r+=n;break;case h:"'"===n?w*=-1:i--,a===!0?(m=v,p=M,b=C*w*90*(Math.PI/180),R=C,T=!0,z=s):o(v,M,C*w*90*(Math.PI/180)),g=f;break;default:return console.log("Fatal error, state unknown."),-1}i++}},a(e)},e}(WGLCube||{});
function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}var WGLCube=function(e){return e.Manager=function(e){function n(){for(var e=[],n=document.getElementsByClassName("wglcube_player"),t=0;t<n.length;t++)e.push(new WGLCube.Player(n[t]));window.addEventListener("scroll",function(t){for(var r=0;r<n.length;r++)e[r].isPreview()||e[r].isScrolledIntoView()})}n(e)},e}(WGLCube||{});r(function(){new WGLCube.Manager});
var WGLCube=function(e){return e.Player=function(e){function t(e){c=e,o=new WGLCube.Core(c),u=c.getAttribute("data-init"),m=c.getAttribute("data-steps").split(" "),null===m&&console.log("data-steps needed in order to display an algorithm execution.");var t=document.createElement("div"),d=document.createElement("div"),r=document.createElement("div"),p=document.createElement("button"),v=document.createElement("button"),f=document.createElement("button"),L=document.createElement("button"),h=document.createElement("button");t.className="steps-container",d.className="controls",r.className="hint",p.className="icon-previous",v.className="icon-stop",f.className="play-pause icon-play",L.className="icon-next",h.className="icon-eject";for(var y=0;y<m.length;y++){var E=document.createElement("span");E.innerHTML=m[y],E.className="step_"+y,t.appendChild(E)}r.innerHTML="Click to load 3D",p.addEventListener("click",n),v.addEventListener("click",s),f.addEventListener("click",i),L.addEventListener("click",a),h.addEventListener("click",l.to_preview_mode),c.addEventListener("click",l.to_interactive_mode),d.appendChild(p),d.appendChild(v),d.appendChild(f),d.appendChild(L),d.appendChild(h),c.appendChild(t),c.appendChild(r),c.appendChild(d);for(var C=100;t.scrollHeight!=t.offsetHeight&&(C-=1,t.style.fontSize=C+"px",!(C<.2)););}function n(){p&&(r--,p=!1);var e=m[r].trim();e.indexOf("'")!==-1?e.replace("'",""):e+="'";var t=c.getElementsByClassName("step_"+r)[0];o.Move(e,!0,function(){"undefined"!=typeof t&&t.classList.add("current-step")},function(){r--,"undefined"!=typeof t&&t.classList.remove("current-step")})}function s(){var e=c.getElementsByClassName("step_"+r)[0];"undefined"!=typeof e&&e.classList.remove("current-step"),r=0,p=!0,v=!1,o.Reset(),o.Move(u,!1);var t=c.getElementsByClassName("play-pause")[0];t.classList.remove("icon-pause"),t.classList.add("icon-play")}function i(e){if("undefined"!=typeof e){v=!v;var t=c.getElementsByClassName("play-pause")[0];v?(t.classList.remove("icon-play"),t.classList.add("icon-pause")):(t.classList.remove("icon-pause"),t.classList.add("icon-play"))}if(v){if(r>=m.length)return void s();var n=c.getElementsByClassName("step_"+r)[0];o.Move(m[r],!0,function(){"undefined"!=typeof n&&n.classList.add("current-step")},function(){r++,"undefined"!=typeof n&&n.classList.remove("current-step"),i()})}}function a(){if(r>=m.length)return void s();p||(r++,p=!0);var e=c.getElementsByClassName("step_"+r)[0];o.Move(m[r],!0,function(){"undefined"!=typeof e&&e.classList.add("current-step")},function(){r++,"undefined"!=typeof e&&e.classList.remove("current-step")})}var l=this,o=null,c=null,d=!0,r=0,u=null,m=null,p=!0,v=!1;this.to_interactive_mode=function(e){d=!1;var t=c.getElementsByClassName("controls")[0];t.classList.remove("util-hide"),t.classList.add("util-show");var n=c.getElementsByClassName("hint")[0];n.classList.remove("util-show"),n.classList.add("util-hide"),c.classList.remove("util-cursor-hand"),c.classList.add("util-cursor-none"),o.to_interactive_mode(),o.Move(u,!1,null),s(),c.removeEventListener("click",l.to_interactive_mode)},this.to_preview_mode=function(e){d=!0;var t=c.getElementsByClassName("controls")[0];t.classList.remove("util-show"),t.classList.add("util-hide");var n=c.getElementsByClassName("hint")[0];n.classList.remove("util-hide"),n.classList.add("util-show"),c.classList.remove("util-cursor-none"),c.classList.add("util-cursor-hand"),o.to_preview_mode(),c.addEventListener("click",l.to_interactive_mode),"undefined"!=typeof e&&(e.cancelBubble=!0)},this.isPreview=function(){return d},this.isScrolledIntoView=function(){var e=c.getBoundingClientRect().top,t=c.getBoundingClientRect().bottom,n=t>=0&&e<=window.innerHeight;return n||l.to_preview_mode(),n},t(e)},e}(WGLCube||{});
!function(i,e){var o=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(o),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=e);else try{o.innerHTML=e}catch(i){o.innerText=e}}(document,".preview{position:relative;width:100%;height:75%}.square{position:absolute;width:40%;height:40%}.s1{top:10%;left:10%;background-color:red}.s2{top:10%;right:10%;background-color:blue}.s3{bottom:10%;left:10%;background-color:green}.s4{bottom:10%;right:10%;background-color:yellow}.wglcube_player{overflow:hidden;text-align:center;background:#d8d8d8;cursor:pointer;cursor:hand}.cube{display:none;width:100%;height:75%;bottom:25%;top:0}.steps-container{width:100%;height:15%;bottom:15%;overflow:hidden;font-size:15em}.steps-container span{font-size:inherit;margin-left:2px;margin-right:2px;float:left}.hint{width:100%;height:15%;font-size:1.2em;font-weight:bold}.controls{display:none;width:100%;height:10%;bottom:0}.controls button{padding:0;border:0;height:100%;width:18%;font-size:1em;background-repeat:no-repeat;background-size:contain}.current-step{font-weight:bold}.icon-previous{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNOCAyOFY0aDR2MTFMMjIgNXYyMkwxMiAxN3YxMXoiLz48L3N2Zz4=)}.icon-stop{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNCA0aDI0djI0SDR6Ii8+PC9zdmc+)}.icon-play{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNiA0bDIwIDEyTDYgMjh6Ii8+PC9zdmc+)}.icon-pause{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNCA0aDEwdjI0SDR6bTE0IDBoMTB2MjRIMTh6Ii8+PC9zdmc+)}.icon-next{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNMjQgNHYyNGgtNFYxN0wxMCAyN1Y1bDEwIDEwVjR6Ii8+PC9zdmc+)}.icon-eject{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNMCAyNGgzMnY0SDB6TTE2IDRsMTYgMTZIMHoiLz48L3N2Zz4=)}.util-show{display:block}.util-hide{display:none}.util-cursor-hand{cursor:pointer;cursor:hand}.util-cursor-none{cursor:inherit}");