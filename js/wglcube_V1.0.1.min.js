var WGL=function(e){return e.Core=function(e){function a(e){if(d=e,u.size=d.getAttribute("data-size"),"undefined"==typeof u.size)return console.log("data-size parameter needed in order to render cube."),0;var a=d.getAttribute("data-show");null!==a&&(h=a.split(","));var t=document.createElement("div");t.className="preview",t.innerHTML="<div class='square s1'></div><div class='square s2'></div><div class='square s3'></div><div class='square s4'></div>";var s=document.createElement("div");s.className="cube",d.appendChild(t),d.appendChild(s)}function t(){v=d.getElementsByClassName("cube")[0],z=new THREE.Scene,C=window.WebGLRenderingContext?new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}):new THREE.CanvasRenderer,B=new THREE.PerspectiveCamera(45,v.offsetWidth/v.offsetHeight,.1,1e3),L=new THREE.OrbitControls(B,C.domElement),L.enablePan=!1,C.setClearColor(14211288,1),C.setSize(v.offsetWidth,v.offsetHeight),v.appendChild(C.domElement),s(),v.addEventListener("resize",c),B.position.addScalar(1.4*u.size),l(C,B,L)}function s(){for(var e=0,a=E.length;e<a;e++)z.remove(E[e]);E=[];for(var t=new THREE.BoxGeometry(.98,.98,.98),s=new THREE.MeshFaceMaterial([new THREE.MeshBasicMaterial({color:16737792}),new THREE.MeshBasicMaterial({color:16711680}),new THREE.MeshBasicMaterial({color:65280}),new THREE.MeshBasicMaterial({color:255}),new THREE.MeshBasicMaterial({color:16777215}),new THREE.MeshBasicMaterial({color:16776960})]),n=new THREE.MeshFaceMaterial([new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676}),new THREE.MeshBasicMaterial({color:8684676})]),i=-u.size/2+.5;i<u.size/2;i++)for(var r=-u.size/2+.5;r<u.size/2;r++)for(var o=-u.size/2+.5;o<u.size/2;o++){var l=null;l=0!==h.length&&h.indexOf(E.length.toString())<0?new THREE.Mesh(t,n):new THREE.Mesh(t,s),l.position.set(r,o,i),E.push(l),z.add(l)}}function n(e,a,t){var s=t-u.size/2+.5-1;z.add(e);for(var n=0,i=E.length;n<i;n++)E[n].getWorldPosition()[a]===s&&THREE.SceneUtils.attach(E[n],z,e)}function i(e,a,t){for(var s=t-u.size/2+.5-1,n=0,i=E.length;n<i;n++)E[n].getWorldPosition()[a]===s&&THREE.SceneUtils.detach(E[n],e,z);z.remove(e)}function r(){if(TWEEN.update(),m){switch(f=new THREE.Object3D,n(f,T,p),w=new TWEEN.Tween(f.rotation),T){case"x":w.to({x:R},u.STEP_TIME*H);break;case"y":w.to({y:R},u.STEP_TIME*H);break;case"z":w.to({z:R},u.STEP_TIME*H)}w.onStop(function(){f.updateMatrixWorld(),i(f,T,p),b=!1,s(z)}),w.onComplete(function(){f.updateMatrixWorld(),i(f,T,p),b=!1,g()}),m=!1,b=!0,w.start()}}function o(e,a,t){switch(f=new THREE.Object3D,n(f,e,a),e){case"x":f.rotation.x+=t;break;case"y":f.rotation.y+=t;break;case"z":f.rotation.z+=t}f.updateMatrixWorld(),i(f,e,a)}function l(e,a,t){M=requestAnimationFrame(function(){l(e,a,t)}),e.render(z,a),r(),t.update()}function c(){var e=u.CubeContainer.offsetWidth,a=u.CubeContainer.offsetHeight;C.setSize(e,a),B.aspect=e/a,B.updateProjectionMatrix()}var u=this;u.size=null,u.STEP_TIME=750;var d=null,E=[],h=[],f=null,v=null,w=null,M=null,m=!1,T=null,p=null,R=null,H=null,b=null,g=null,z=null,C=null,B=null,L=null;this.to_interactive_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-show"),e.classList.add("util-hide");var a=d.getElementsByClassName("cube")[0];a.classList.remove("util-hide"),a.classList.add("util-show"),t()},this.to_preview_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-hide"),e.classList.add("util-show");var a=d.getElementsByClassName("cube")[0];if(a.classList.remove("util-show"),a.classList.add("util-hide"),cancelAnimationFrame(M),null!=C)for(C.forceContextLoss(),C=null,B=null,L=null;v.lastChild;)v.removeChild(v.lastChild)},this.Reset=function(){null!=w&&b?w.stop():s(z)},this.Move=function(e,a,t,s){if(b)return void console.log("Animation not finished, try again later.");a&&t(),e+=" ";for(var n=0,i="",r="",l=0,c=1,d=2,E=3,h=4,f=5;"undefined"!=typeof i;)for(var v="",w=1,M=1,z=1,C=l;C!==f;){switch(i=e[n],C){case l:/\s/g.test(i)||(C=c,n--),"undefined"==typeof i&&(C=f);break;case c:var B=parseInt(i);isNaN(B)?(C=d,n--,""!==r&&(w=parseInt(r),r="")):r+=i;break;case d:switch(i){case"R":w=u.size-w+1,M*=-1;case"L":v="x";break;case"U":w=u.size-w+1,M*=-1;case"D":v="y";break;case"F":w=u.size-w+1,M*=-1;case"B":v="z";break;default:return console.log("FACE to move is incorrect"),-1}C=E;break;case E:var L=parseInt(i);isNaN(L)?(C=h,n--,""!==r&&(z=parseInt(r),r="")):r+=i;break;case h:"'"===i?M*=-1:n--,a===!0?(T=v,p=w,R=z*M*90*(Math.PI/180),H=z,m=!0,g=s):o(v,w,z*M*90*(Math.PI/180)),C=f;break;default:return console.log("Fatal error, state unknown."),-1}n++}},a(e)},e}(WGL||{});
function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}var WGL=function(e){return e.Manager=function(e){function n(){for(var e=[],n=document.getElementsByClassName("wglcube_player"),t=0;t<n.length;t++)e.push(new WGL.Player(n[t]));window.addEventListener("scroll",function(t){for(var r=0;r<n.length;r++)e[r].isPreview()||e[r].isScrolledIntoView()})}n(e)},e}(WGL||{});r(function(){new WGL.Manager});
var WGL=function(e){return e.Player=function(e){function t(e){r=e,o=new WGL.Core(r),u=r.getAttribute("data-init"),m=r.getAttribute("data-steps").split(" "),null===m&&console.log("data-steps needed in order to display an algorithm execution.");var t=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),p=document.createElement("button"),v=document.createElement("button"),f=document.createElement("button"),L=document.createElement("button"),h=document.createElement("button");t.className="steps-container",d.className="controls",c.className="hint",p.innerHTML="&lt;&lt;",v.innerHTML="&#9726;",f.innerHTML="&#9654;",f.className="play-pause",L.innerHTML="&gt;&gt;",h.innerHTML="&#9167;";for(var E=0;E<m.length;E++){var g=document.createElement("span");g.innerHTML=m[E],g.className="step_"+E,t.appendChild(g)}c.innerHTML="Click to load 3D",p.addEventListener("click",n),v.addEventListener("click",s),f.addEventListener("click",i),L.addEventListener("click",a),h.addEventListener("click",l.to_preview_mode),r.addEventListener("click",l.to_interactive_mode),d.appendChild(p),d.appendChild(v),d.appendChild(f),d.appendChild(L),d.appendChild(h),r.appendChild(t),r.appendChild(c),r.appendChild(d);for(var y=1;t.scrollHeight!=t.offsetHeight&&(y-=.01,t.style.fontSize=y+"em",!(y<.2)););}function n(){p&&(c--,p=!1);var e=m[c].trim();e.indexOf("'")!==-1?e.replace("'",""):e+="'";var t=r.getElementsByClassName("step_"+c)[0];o.Move(e,!0,function(){"undefined"!=typeof t&&t.classList.add("current-step")},function(){c--,"undefined"!=typeof t&&t.classList.remove("current-step")})}function s(){var e=r.getElementsByClassName("step_"+c)[0];"undefined"!=typeof e&&e.classList.remove("current-step"),c=0,p=!0,v=!1,o.Reset(),o.Move(u,!1);var t=r.getElementsByClassName("play-pause")[0];t.classList.remove("icon-pause"),t.classList.add("icon-play")}function i(e){if("undefined"!=typeof e){v=!v;var t=r.getElementsByClassName("play-pause")[0];v?t.innerHTML="&#9646;&#9646":t.innerHTML="&#9654;"}if(v){if(c>=m.length)return void s();var n=r.getElementsByClassName("step_"+c)[0];o.Move(m[c],!0,function(){"undefined"!=typeof n&&n.classList.add("current-step")},function(){c++,"undefined"!=typeof n&&n.classList.remove("current-step"),i()})}}function a(){if(c>=m.length)return void s();p||(c++,p=!0);var e=r.getElementsByClassName("step_"+c)[0];o.Move(m[c],!0,function(){"undefined"!=typeof e&&e.classList.add("current-step")},function(){c++,"undefined"!=typeof e&&e.classList.remove("current-step")})}var l=this,o=null,r=null,d=!0,c=0,u=null,m=null,p=!0,v=!1;this.to_interactive_mode=function(e){d=!1;var t=r.getElementsByClassName("controls")[0];t.classList.remove("util-hide"),t.classList.add("util-show");var n=r.getElementsByClassName("hint")[0];n.classList.remove("util-show"),n.classList.add("util-hide"),r.classList.remove("util-cursor-hand"),r.classList.add("util-cursor-none"),o.to_interactive_mode(),o.Move(u,!1,null),s(),r.removeEventListener("click",l.to_interactive_mode)},this.to_preview_mode=function(e){d=!0;var t=r.getElementsByClassName("controls")[0];t.classList.remove("util-show"),t.classList.add("util-hide");var n=r.getElementsByClassName("hint")[0];n.classList.remove("util-hide"),n.classList.add("util-show"),r.classList.remove("util-cursor-none"),r.classList.add("util-cursor-hand"),o.to_preview_mode(),r.addEventListener("click",l.to_interactive_mode),"undefined"!=typeof e&&(e.cancelBubble=!0)},this.isPreview=function(){return d},this.isScrolledIntoView=function(){var e=r.getBoundingClientRect().top,t=r.getBoundingClientRect().bottom,n=t>=0&&e<=window.innerHeight;return n||l.to_preview_mode(),n},t(e)},e}(WGL||{});