var WGLCube=function(e){return e.Core=function(e){function a(e){if(d=e,u.size=d.getAttribute("data-size"),"undefined"==typeof u.size)return console.log("data-size parameter needed in order to render cube."),0;u.STEP_TIME=600+1/(u.size*u.size);var a=d.getAttribute("data-show");null!==a&&(f=a.split(","));var t=document.createElement("div");t.className="preview",t.innerHTML="<div class='square s1'></div><div class='square s2'></div><div class='square s3'></div><div class='square s4'></div>";var s=document.createElement("div");s.className="cube",d.appendChild(t),d.appendChild(s)}function t(){M=d.getElementsByClassName("cube")[0],C=new THREE.Scene,y=window.WebGLRenderingContext?new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}):new THREE.CanvasRenderer,R=new THREE.PerspectiveCamera(45,M.offsetWidth/M.offsetHeight,.1,1e3),H=new THREE.OrbitControls(R,y.domElement),H.enablePan=!1,y.setClearColor(14211288,1),y.setSize(M.offsetWidth,M.offsetHeight),M.appendChild(y.domElement),s(),M.addEventListener("resize",c),R.position.addScalar(1.4*u.size),o(y,R,H)}function s(){for(var e=0,a=E.length;e<a;e++)C.remove(E[e]);E=[];var t=Math.abs(-u.size/2+.5);geometry=new THREE.BoxGeometry(.97,.97,.97),grayBaseMaterial=new THREE.MeshBasicMaterial({color:8684676}),blackBaseMaterial=new THREE.MeshBasicMaterial({color:0}),grayMaterial=new THREE.MeshFaceMaterial([grayBaseMaterial,grayBaseMaterial,grayBaseMaterial,grayBaseMaterial,grayBaseMaterial,grayBaseMaterial]);for(var s=-u.size/2+.5;s<u.size/2;s++)for(var i=-u.size/2+.5;i<u.size/2;i++)for(var r=-u.size/2+.5;r<u.size/2;r++){var n=Math.abs(i),l=Math.abs(r),o=Math.abs(s);if(n===t||l===t||o===t){var c=null,d=new THREE.MeshFaceMaterial([blackBaseMaterial,blackBaseMaterial,blackBaseMaterial,blackBaseMaterial,blackBaseMaterial,blackBaseMaterial]);0!==f.length&&f.indexOf(E.length.toString())<0?c=new THREE.Mesh(geometry,grayMaterial):(n===t&&i>0?d.materials[0]=new THREE.MeshBasicMaterial({color:16737792}):n==t&&i<0&&(d.materials[1]=new THREE.MeshBasicMaterial({color:16711680})),l===t&&r>0?d.materials[2]=new THREE.MeshBasicMaterial({color:65280}):l===t&&r<0&&(d.materials[3]=new THREE.MeshBasicMaterial({color:255})),o===t&&s>0?d.materials[4]=new THREE.MeshBasicMaterial({color:16777215}):o===t&&s<0&&(d.materials[5]=new THREE.MeshBasicMaterial({color:16776960})),c=new THREE.Mesh(geometry,d)),c.position.set(i,r,s),E.push(c),C.add(c)}}}function i(e,a,t){var s=t-u.size/2+.5-1;C.add(e);for(var i=0,r=E.length;i<r;i++)E[i].getWorldPosition()[a]===s&&THREE.SceneUtils.attach(E[i],C,e)}function r(e,a,t){for(var s=t-u.size/2+.5-1,i=0,r=E.length;i<r;i++)E[i].getWorldPosition()[a]===s&&THREE.SceneUtils.detach(E[i],e,C);C.remove(e)}function n(){if(TWEEN.update(),b){switch(h=new THREE.Object3D,i(h,g,w),v=new TWEEN.Tween(h.rotation),g){case"x":v.to({x:T},u.STEP_TIME*p);break;case"y":v.to({y:T},u.STEP_TIME*p);break;case"z":v.to({z:T},u.STEP_TIME*p)}v.onStop(function(){h.updateMatrixWorld(),r(h,g,w),B=!1,s(C)}),v.onComplete(function(){h.updateMatrixWorld(),r(h,g,w),B=!1,z()}),b=!1,B=!0,v.start()}}function l(e,a,t){switch(h=new THREE.Object3D,i(h,e,a),e){case"x":h.rotation.x+=t;break;case"y":h.rotation.y+=t;break;case"z":h.rotation.z+=t}h.updateMatrixWorld(),r(h,e,a)}function o(e,a,t){m=requestAnimationFrame(function(){o(e,a,t)}),e.render(C,a),n(),t.update()}function c(){console.log("WGLCube.Core container resized");var e=u.CubeContainer.offsetWidth,a=u.CubeContainer.offsetHeight;y.setSize(e,a),R.aspect=e/a,R.updateProjectionMatrix()}var u=this;u.size=null,u.STEP_TIME=0;var d=null,E=[],f=[],h=null,M=null,v=null,m=null,b=!1,g=null,w=null,T=null,p=null,B=null,z=null,C=null,y=null,R=null,H=null;this.to_interactive_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-show"),e.classList.add("util-hide");var a=d.getElementsByClassName("cube")[0];a.classList.remove("util-hide"),a.classList.add("util-show"),t()},this.to_preview_mode=function(){var e=d.getElementsByClassName("preview")[0];e.classList.remove("util-hide"),e.classList.add("util-show");var a=d.getElementsByClassName("cube")[0];if(a.classList.remove("util-show"),a.classList.add("util-hide"),cancelAnimationFrame(m),null!==y)for(y.forceContextLoss(),y=null,R=null,H=null;M.lastChild;)M.removeChild(M.lastChild)},this.Reset=function(){null!==v&&B?v.stop():s(C)},this.Move=function(e,a,t,s){if(B)return void console.log("Animation not finished, try again later.");a&&t(),e+=" ";for(var i=0,r="",n="",o=0,c=1,d=2,E=3,f=4,h=5;"undefined"!=typeof r;)for(var M="",v=1,m=1,C=1,y=o;y!==h;){switch(r=e[i],y){case o:/\s/g.test(r)||(y=c,i--),"undefined"==typeof r&&(y=h);break;case c:var R=parseInt(r);isNaN(R)?(y=d,i--,""!==n&&(v=parseInt(n),n="")):n+=r;break;case d:switch(r){case"R":v=u.size-v+1,m*=-1;case"L":M="x";break;case"U":v=u.size-v+1,m*=-1;case"D":M="y";break;case"F":v=u.size-v+1,m*=-1;case"B":M="z";break;default:return console.log("FACE to move is incorrect"),-1}y=E;break;case E:var H=parseInt(r);isNaN(H)?(y=f,i--,""!==n&&(C=parseInt(n),n="")):n+=r;break;case f:"'"===r?m*=-1:i--,a===!0?(g=M,w=v,T=C*m*90*(Math.PI/180),p=C,b=!0,z=s):l(M,v,C*m*90*(Math.PI/180)),y=h;break;default:return console.log("Fatal error, state unknown."),-1}i++}},a(e)},e}(WGLCube||{});
function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}var WGLCube=function(e){return e.Manager=function(e){function t(e){r=document.getElementsByClassName("wglcube_player"),u=e<12?e:12;for(var t=0;t<r.length;t++)i.push(new WGLCube.Player(r[t])),r[t].addEventListener("click",n),r[t].setAttribute("data-index",t)}function n(e){var t=parseInt(this.getAttribute("data-index"));if(i[t].to_interactive_mode(),r[t].removeEventListener("click",n),a.push(t),a.length>u){var c=null;if(a.forEach(function(e,t,a){i[t].isVisible()||(i[t].to_preview_mode(),r[t].addEventListener("click",n),c=a.splice(t,1))}),null===c){var s=a.shift();i[s].to_preview_mode(),r[s].addEventListener("click",n)}}}var i=[],r=[],a=[],u=6;this.setMaxPlayers=function(e){u=e<12?e:12},t(e)},e}(WGLCube||{});r(function(){new WGLCube.Manager(6)});
var WGLCube=function(e){return e.Player=function(e){function t(e){c=e,o=new WGLCube.Core(c),r=c.getAttribute("data-init"),u=c.getAttribute("data-steps").split(" "),null===u&&console.log("data-steps needed in order to display an algorithm execution.");var t=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div"),m=document.createElement("button"),p=document.createElement("button"),v=document.createElement("button"),f=document.createElement("button");t.className="steps-container",l.className="controls",d.className="hint",m.className="icon-previous",p.className="icon-stop",v.className="play-pause icon-play",f.className="icon-next";for(var L=0;L<u.length;L++){var h=document.createElement("span");h.innerHTML=u[L],h.className="step_"+L,t.appendChild(h)}d.innerHTML="Click to load 3D",m.addEventListener("click",s),p.addEventListener("click",n),v.addEventListener("click",i),f.addEventListener("click",a),t.onresize=function(){console.log("div_step_list resized")},l.appendChild(m),l.appendChild(p),l.appendChild(v),l.appendChild(f),c.appendChild(t),c.appendChild(d),c.appendChild(l);for(var y=100;t.scrollHeight!=t.offsetHeight&&(y-=1,t.style.fontSize=y+"px",!(y<.2)););}function s(){m&&(d--,m=!1);var e=u[d].trim();e.indexOf("'")!==-1?e.replace("'",""):e+="'";var t=c.getElementsByClassName("step_"+d)[0];o.Move(e,!0,function(){"undefined"!=typeof t&&t.classList.add("current-step")},function(){d--,"undefined"!=typeof t&&t.classList.remove("current-step")})}function n(){var e=c.getElementsByClassName("step_"+d)[0];"undefined"!=typeof e&&e.classList.remove("current-step"),d=0,m=!0,p=!1,o.Reset(),o.Move(r,!1);var t=c.getElementsByClassName("play-pause")[0];t.classList.remove("icon-pause"),t.classList.add("icon-play")}function i(e){if("undefined"!=typeof e){p=!p;var t=c.getElementsByClassName("play-pause")[0];p?(t.classList.remove("icon-play"),t.classList.add("icon-pause")):(t.classList.remove("icon-pause"),t.classList.add("icon-play"))}if(p){if(d>=u.length)return void n();var s=c.getElementsByClassName("step_"+d)[0];o.Move(u[d],!0,function(){"undefined"!=typeof s&&s.classList.add("current-step")},function(){d++,"undefined"!=typeof s&&s.classList.remove("current-step"),i()})}}function a(){if(d>=u.length)return void n();m||(d++,m=!0);var e=c.getElementsByClassName("step_"+d)[0];o.Move(u[d],!0,function(){"undefined"!=typeof e&&e.classList.add("current-step")},function(){d++,"undefined"!=typeof e&&e.classList.remove("current-step")})}var l=this,o=null,c=null,d=0,r=null,u=null,m=!0,p=!1;this.to_interactive_mode=function(e){var t=c.getElementsByClassName("controls")[0];t.classList.remove("util-hide"),t.classList.add("util-show");var s=c.getElementsByClassName("hint")[0];s.classList.remove("util-show"),s.classList.add("util-hide"),c.classList.remove("util-cursor-hand"),c.classList.add("util-cursor-none"),o.to_interactive_mode(),o.Move(r,!1,null),n(),c.removeEventListener("click",l.to_interactive_mode)},this.to_preview_mode=function(e){var t=c.getElementsByClassName("controls")[0];t.classList.remove("util-show"),t.classList.add("util-hide");var s=c.getElementsByClassName("hint")[0];s.classList.remove("util-hide"),s.classList.add("util-show"),c.classList.remove("util-cursor-none"),c.classList.add("util-cursor-hand"),o.to_preview_mode(),"undefined"!=typeof e&&(e.cancelBubble=!0)},this.isVisible=function(){var e=c.getBoundingClientRect().top,t=c.getBoundingClientRect().bottom;return t>=0&&e<=window.innerHeight},t(e)},e}(WGLCube||{});
!function(i,e){var o=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(o),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=e);else try{o.innerHTML=e}catch(i){o.innerText=e}}(document,".preview{height:75%;position:relative;width:100%}.square{height:40%;position:absolute;width:40%}.s1{background-color:red;left:10%;top:10%}.s2{background-color:blue;right:10%;top:10%}.s3{background-color:green;bottom:10%;left:10%}.s4{background-color:yellow;bottom:10%;right:10%}.wglcube_player{background:#d8d8d8;cursor:pointer;cursor:hand;overflow:hidden;text-align:center}.cube{bottom:25%;display:none;height:75%;top:0;width:100%}.steps-container{bottom:15%;font-size:15em;height:15%;overflow:hidden;width:100%}.steps-container span{float:left;font-size:inherit;margin-left:2px;margin-right:2px}.hint{font-size:1.2em;font-weight:bold;height:15%;width:100%}.controls{bottom:0;display:none;height:10%;width:100%}.controls button{background-repeat:no-repeat;background-size:contain;border:0;font-size:1em;height:100%;padding:0;width:20%}.current-step{font-weight:bold}.icon-previous{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNOCAyOFY0aDR2MTFMMjIgNXYyMkwxMiAxN3YxMXoiLz48L3N2Zz4=)}.icon-stop{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNCA0aDI0djI0SDR6Ii8+PC9zdmc+)}.icon-play{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNiA0bDIwIDEyTDYgMjh6Ii8+PC9zdmc+)}.icon-pause{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNNCA0aDEwdjI0SDR6bTE0IDBoMTB2MjRIMTh6Ii8+PC9zdmc+)}.icon-next{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNMjQgNHYyNGgtNFYxN0wxMCAyN1Y1bDEwIDEwVjR6Ii8+PC9zdmc+)}.util-show{display:block}.util-hide{display:none}.util-cursor-hand{cursor:pointer;cursor:hand}.util-cursor-none{cursor:inherit}");